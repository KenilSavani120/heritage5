  "use client";
  import React, { useState } from "react";
  import Image from "next/image";
  import { MdSaveAlt } from "react-icons/md";
  import { FaSoundcloud } from "react-icons/fa";
  import I1 from "../../../public/image/I-1.webp";
  import I2 from "../../../public/image/i-2.png"; // Add more images as needed
  import TajMahalImage from "../../../public/image/i-3.jpeg";
  import RankiVavImage from "../../../public/image/Rani.jpg";
  import AdalajNiVavImage from "../../../public/image/Adalaj-ni-Vav.jpg";
  import MahabatMaqbaraImage from "../../../public/image/Maha.jpg";
  import IdarFortTumbNilImage from "../../../public/image/Idar-Fort-Thumbnail.jpg";
  import SidiSayyadDholaviraImage from "../../../public/image/sidisayad.jpeg";
  import SunTempleImage from "../../../public/image/e1.jpeg";
  import ChapanerImage from "../../../public/image/Champaner-1.jpeg";
  import LalkiloImage from "../../../public/image/Redkila.jpeg";
  import Link from "next/link";
  import Popup from "../Popup/Popup"
  import axios from "axios"; 
  import { FaMapMarkerAlt } from "react-icons/fa";

  const placesData = [
    {
      id: 1,
      image: I1,
      title: "Hampi with Chariot",
      years: "600",
      description:
        "Hampi, with its iconic Stone Chariot, is a UNESCO World Heritage Site in Karnataka, India. The ruins of the ancient city of Vijayanagara, which was the capital of the Vijayanagara Empire, showcase a rich history dating back around 600 years. ",
      location: "Nimbapura, Karnataka ",
      pollution: "Despite its UNESCO World Heritage status, Hampi faces challenges such as littering, graffiti, and air pollution due to nearby industrial activities.",
      awarenessEfforts: "Local authorities have initiated awareness campaigns to educate visitors about the importance of preserving Hampi's cultural heritage. Community clean-up drives and conservation projects are also being organized.",
    },
    {
      id: 2,
      image: I2,
      title: "Thirumalai Nayakar Mahal",
      years: "387",
      description:
        "Under the care of the Tamil Nadu Archaeological Department, the Thirumalai Nayakar Mahal is a fine example of splendid architecture and rich history.",
      location: "Madurai Nayaka dynasty ",
      pollution: "Thirumalai Nayakar Mahal is facing degradation due to environmental pollution and inadequate maintenance, resulting in deterioration of its architectural features.",
      awarenessEfforts: "Collaborative efforts between the Tamil Nadu Archaeological Department and local communities aim to raise awareness about the significance of Thirumalai Nayakar Mahal and implement restoration projects to combat pollution."
    },
    {
      id: 3,
      image: TajMahalImage,
      title: "Taj Mahal",
      years: "369",
      description:
        "The Taj Mahal is an ivory-white marble mausoleum on the southern bank of the river Yamuna in the Indian city of Agra.",
      location: " Agra, Uttar Pradesh",
      pollution: "Taj Mahal is threatened by air pollution, acid rain, and urban development activities, leading to discoloration of its marble faÃ§ade and structural damage.",
      awarenessEfforts: "Various conservation initiatives by governmental and non-governmental organizations focus on reducing pollution levels around the Taj Mahal and promoting responsible tourism practices to preserve its beauty for future generations."
    },
    {
      id: 4,
      image: RankiVavImage,
      title: "Ranki Vav",
      years: "1000",
      description:
        "Ranki Vav is a stepwell in the town of Patan in Gujarat, India.",
      location: "Nimbapura, Karnataka ",
      pollution: "Ranki Vav is facing issues such as water pollution and structural deterioration due to lack of maintenance and urban encroachment.",
      awarenessEfforts: "Local authorities and heritage conservation groups are working together to implement measures to improve water quality and preserve the structural integrity of Ranki Vav. Awareness campaigns are also conducted to educate the public about the importance of preserving this historical stepwell."
    },
    {
      id: 5,
      image: AdalajNiVavImage,
      title: "Adalaj Ni Vav",
      years: "500",
      description:
        "Adalaj Ni Vav is a five-story stepwell located in the village of Adalaj, near Ahmedabad in Gandhinagar district, Gujarat.",
      location: "Adalaj, Gujarat ",   
      pollution: "Adalaj Ni Vav is threatened by water pollution, vandalism, and encroachment, which pose significant risks to its architectural integrity and historical significance.",
      awarenessEfforts: "Community-led initiatives, supported by government agencies, focus on cleaning and restoring Adalaj Ni Vav, along with raising awareness among visitors and local residents about the importance of protecting this cultural heritage site."
    },
    {
      id: 6,
      image: MahabatMaqbaraImage,
      title: "Mahabat Maqbara",
      years: "200",
      description: "Mahabat Maqbara is a palace-mausoleum in Junagadh, India.",
      location: "junagadh, Gujarat,",
      pollution: "Mahabat Maqbara is facing degradation due to environmental pollution, lack of maintenance, and urban development activities in the surrounding area.",
      awarenessEfforts: "Efforts are underway to raise awareness about the cultural significance of Mahabat Maqbara and implement conservation measures to mitigate pollution and preserve its architectural heritage. Local communities are actively involved in restoration projects and awareness campaigns."
    },
    {
      id: 7,
      image: IdarFortTumbNilImage,
      title: "Idar Fort and Tumb Nil",
      years: "600",
      description:
        "Idar Fort and Tumb Nil are historical structures in Idar, Gujarat.",
      location: "Nimbapura, Karnataka ",
      pollution: "Idar Fort and Tumb Nil are threatened by environmental pollution, neglect, and encroachment, which pose challenges to their preservation and cultural significance.",
      awarenessEfforts: "Collaborative efforts between heritage conservation organizations, local communities, and government authorities aim to address pollution issues, restore deteriorating structures, and raise awareness about the historical importance of Idar Fort and Tumb Nil."
    },
    {
      id: 8,
      image: SidiSayyadDholaviraImage,
      title: "Sidi Sayyad Mosque and Dholavira",
      years: "400",
      description:
        "Sidi Sayyad Mosque is a mosque in Ahmedabad, and Dholavira is an archaeological site in the Rann of Kachchh, India.",
      location: "Ahmedabad, Gujarat",
      pollution: "Sidi Sayyad Mosque is affected by environmental pollution, while Dholavira faces challenges such as waterlogging, erosion, and encroachment due to its location in the Rann of Kachchh.",
      awarenessEfforts: "Conservation projects supported by governmental and non-governmental organizations focus on mitigating pollution around Sidi Sayyad Mosque and implementing measures to protect and preserve the archaeological site of Dholavira. Educational programs and community engagement activities are conducted to raise awareness about the importance of these heritage sites."
    },
    {
      id: 9,
      image: SunTempleImage,
      title: "Sun Temple",
      years: "800",
      description:
        "Sun Temple is a Hindu temple dedicated to the solar deity Surya, located at Modhera in Gujarat, India.",
      location: "Modhera, Gujarat ",
      pollution: "Sun Temple is threatened by environmental pollution, weathering, and inadequate maintenance, which pose risks to its architectural integrity and cultural significance.",
      awarenessEfforts: "Heritage conservation groups, in collaboration with local authorities, are implementing measures to reduce pollution levels around Sun Temple and undertake restoration work to preserve its structural and artistic elements. Educational initiatives are also undertaken to promote responsible tourism and raise awareness about the importance of protecting this historical monument."
    },
    {
      id: 10,
      image: ChapanerImage,
      title: "Champaner-Pavagadh Archaeological Park",
      years: "900",
      description:
        "Champaner-Pavagadh Archaeological Park is a UNESCO World Heritage Site located in Panchmahal district, Gujarat.",
      location: "Champaner, Gujarat ",
      pollution: "Champaner-Pavagadh Archaeological Park faces threats from environmental pollution, vegetation overgrowth, and encroachment, leading to degradation of its archaeological and architectural features.",
      awarenessEfforts: "Governmental and non-governmental organizations, along with local communities, are engaged in conservation efforts to address pollution issues, restore historical structures, and promote sustainable tourism practices within Champaner-Pavagadh Archaeological Park. Awareness campaigns are conducted to highlight the significance of the site and encourage public participation in its preservation."
    },
    {
      id: 11,
      image: LalkiloImage,
      title: "Red Fort",
      years: "375 ",
      description:
        "Red Fort is a beautiful place with a rich history and cultural significance. Visit Red Fort to explore its unique charm and experience the local culture.",
      location: "Lal Qila, Chandni Chowk, New Delhi",
      pollution: "Red Fort is affected by air pollution, weathering, and overcrowding, which pose risks to its structural integrity and cultural value.",
      awarenessEfforts: "Heritage conservation authorities, in collaboration with local communities and tourism agencies, are implementing measures to mitigate pollution levels around Red Fort and manage visitor influx to minimize impact on the monument. Educational programs and guided tours are organized to raise awareness about the historical significance of Red Fort and promote responsible tourism practices among visitors."
    },
  ];


  const Place = ({  }) => {
    const [openDetails, setOpenDetails] = useState({});
    const [selectedPlaceId, setSelectedPlaceId] = useState(null);
    const [pollutionData, setPollutionData] = useState(null); // State to store pollution data

    const toggleDetails = async (placeId, lat, lon) => {
      setSelectedPlaceId(placeId);
      setOpenDetails((prevDetails) => ({
        ...prevDetails,
        [placeId]: !prevDetails[placeId],
      }));

      try {
        const response = await axios.get(`http://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid={API key}`);
        setPollutionData(response.data);
      } catch (error) {
        console.error("Error fetching pollution data:", error);
        setPollutionData(null);
      }
    };

    const handleClosePopup = () => {
      setOpenDetails((prevDetails) => ({
        ...prevDetails,
        [selectedPlaceId]: false,
      }));
      setSelectedPlaceId(null);
      setPollutionData(null);
    };

    return (
      <section className="h-full w-full bg-yellow-100 p-4 md:p-2 ">
        <div className="main grid ">
          <div className=" md:gap-3 lg:grid lg:grid-cols-2 ">
            {placesData.map((place) => (
              <div key={place.id} className="pb-4  sm:p-4 p-2 md:p-6 lg:p-8">
                <div className="">
                  <Image
                    src={place.image}
                    alt={`Image ${place.id}`}
                    className="grid w-full h-[210px] sm:h-[260px] md:h-[350px] lg:h-80 2xl:h-96 rounded-xl"
                  />
                </div>
                <div className=" ">
                  <div className=" flex  justify-between ">
                    <div>
                      <div>
                        <h1 className="font-montagu-slab text-amber-950 font-bold text-2xl md:text-xl">
                          {place.title}
                        </h1>
                      </div>
                      <div>
                        <span className="text-amber-500 font-bold font-montagu-slab">
                          {`${place.years} Years Old`}
                        </span>
                      </div>
                      <div>
                        <span className="text-amber-700 font-montagu-slab font-bold">
                          {place.location}
                        </span>
                      </div>
                    </div>
                    <div className="pt-4 text-2xl">
                <a
                  href={`https://www.google.com/maps/@${place.lat},${place.lon},15z?entry=ttu`}
                  target="_blank"
                  className="cursor-pointer"
                >
                  <FaMapMarkerAlt />
                </a>
              </div>
                  </div>
                </div>

                <div className="w-full">
                  <div className="flex text-end justify-end ">
                    <button
                      className="font-montagu-slab text-lg text-amber-950 "
                      onClick={() => toggleDetails(place.id)}
                    >
                      More...
                    </button>
                  </div>
                  {openDetails[place.id] && (
                    <Popup place={place} onClose={handleClosePopup} />
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>
    );
  };

  export default Place;